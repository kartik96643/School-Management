<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HomePage</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
    }

    .container {
      background-image: url('../public/assets/home.mp4');
    }

    .video-container {
      position: relative;
      width: 100%;
      height: 91vh;
      overflow: hidden;
    }

    .back-video video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 0;
    }

    .overlay-text {
      position: absolute;
      top: 10%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1;
      color: #dc3545;
      font-size: 2.4rem;
      font-weight: bold;
      text-align: center;
    }

    .education-text {
      position: absolute;
      top: 30%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1;
      text-align: center;
      color: #ffffff;
      max-width: 900px;
      padding: 1rem 2rem;
    }

    .education-text h2 {
      font-size: 3.5rem;
      font-weight: 700;
      margin-bottom: 1rem;
    }

    .education-text p {
      font-size: 1.5rem;
      line-height: 1.8;
      margin: 0;
    }

    .forSec {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 600px;
      z-index: 1050;
      transition: opacity 0.5s ease;
      padding: 0.3rem 1rem;
      font-size: 0.95rem;
    }

    /* Ensure navbar does not add space */
    .navbar {
      margin-bottom: 0 !important;
    }

    /* Remove reserved space height */
    .fixed-alert-wrapper {
      position: relative;
    }

    .video-bg {
      position: fixed;
      top: 0;
      left: 0;
      min-width: 100%;
      min-height: 100%;
      object-fit: cover;
      z-index: -1;
    }

    .container {
      position: relative;
      z-index: 1;
      min-height: 100vh;
    }

    .card {
      background-color: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(8px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
      border-radius: 16px;
    }

    .credit {
      margin-top: 1.5rem;
      padding: 0.5rem 1rem;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(5px);
      border-radius: 20px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      color: #ffffff;
      font-size: 0.85rem;
      text-align: center;
      display: inline-block;
      border: 1px solid rgba(255, 255, 255, 0.3);
      white-space: nowrap;
    }

    .credit p {
      margin: 0;
    }

    .credit strong {
      color: blue;
      font-weight: 600;
    }
  </style>
</head>

<body>
  <%- include('navbar.ejs') %>

    <!-- Show alert only if message exists -->
    <% if (msg) { %>
      <div class="alert alert-success forSec text-center">
        <%= msg %>
      </div>
      <% } %>
     <% if (typeof message !=="undefined" && message) { %>
          <div class="alert alert-success forSec text-center">
            <%= message %>
          </div>
      <% } %>
       <% if (typeof danger !=="undefined" && danger) { %>
              <div class="alert alert-danger forSec text-center">
                <%= danger %>
              </div>
        <% } %>



                <% if (locals.user) { %>
                  <video class="video-bg" autoplay muted loop playsinline>
                    <source src="/assets/home.mp4" type="video/mp4" />

                  </video>
                  <div class="container d-flex justify-content-center align-items-center"
                    style="min-height: calc(100vh - 56px);">
                    <div class="card p-4" style="max-width: 400px; width: 100%">
                      <div class="card-body text-center">
                        <h4 class="card-title mb-3">ðŸŽ‰ Welcome, <%= user.name %>
                        </h4>
                        <p class="text-muted mb-4">Choose an option below to proceed:</p>

                        <div class="d-grid gap-3">
                          <a href="/students/allstudents" class="btn btn-outline-primary">
                            <i class="bi bi-building"></i> Students Data
                          </a>
                          <a href="/students/register" class="btn btn-outline-primary">
                            <i class="bi bi-person-plus"></i> Registration
                          </a>
                          <a href="/students/studentFees" class="btn btn-outline-primary">
                            <i class="bi bi-cash-coin"></i> Fees Submission
                          </a>
                          <a href="/teacher/register" class="btn btn-outline-primary">
                            <i class="bi bi-people-fill"></i> School Staff Data
                          </a>
                          <a href="/attendance/selection" class="btn btn-outline-primary">
                            Attendance
                          </a>
                          <a href="/staffAttendance/salaryGenerator/form" class="btn btn-outline-primary">
                            Staff Salary
                          </a>
                          <a href="/exam-timetable" class="btn btn-outline-primary">
                            TimeTable
                          </a>
                          <a href="/result" class="btn btn-outline-primary">
                            <i class="bi bi-bar-chart-line"></i> Results
                          </a>
                          <a href="/sessionHistory" class="btn btn-outline-primary">
                            Session History
                          </a>
                          <a href="/students/passout" class="btn btn-outline-primary">
                            Passout Students
                          </a>
                        </div>
                      </div>
                    </div>
                  </div>

                  <% } else { %>
                    <!-- Video Background -->
                    <div class="video-container">
                      <div class="back-video">
                        <video autoplay muted loop playsinline>
                          <source src="/assets/earth.mp4" type="video/mp4" />
                        </video>
                      </div>

                      <!-- Login prompt -->
                      <div class="overlay-text">
                        Please log in to access your account
                      </div>

                      <!-- Education heading and paragraph -->
                      <div class="education-text">
                        <h2>Empowering Minds, Shaping Futures</h2>
                        <p>
                          Education is the passport to the future, for tomorrow belongs to those who prepare for it
                          today. It builds confidence, unlocks creativity, and drives meaningful change in every corner
                          of society.
                        </p>
                        <div class="credit">
                          <p>Â© <span id="year"></span> <strong><a
                                href="https://devignify.netlify.app/">DEVIGNIFY</a></strong>. All rights reserved.
                            Designed & developed <strong>Class of 2025</strong>.</p>
                        </div>



                      </div>
                    </div>

                    <% } %>

                      <script
                        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>

                      <script>
                        window.addEventListener("DOMContentLoaded", () => {
                          const alert = document.querySelector(".forSec");
                          if (alert) {
                            setTimeout(() => {
                              alert.style.opacity = "0";
                              setTimeout(() => {
                                alert.style.display = "none";
                              }, 500);
                            }, 2000);
                          }
                        });
                        document.getElementById("year").textContent = new Date().getFullYear();
                      </script>
</body>

</html>